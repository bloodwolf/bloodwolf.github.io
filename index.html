<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>小灰狼笔记</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="小灰狼笔记">
<meta property="og:url" content="http://bloodwolf.github.io/index.html">
<meta property="og:site_name" content="小灰狼笔记">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小灰狼笔记">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="小灰狼笔记" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">小灰狼笔记</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://bloodwolf.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-也谈谈炉石传说战歌指挥官的修改" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/16/也谈谈炉石传说战歌指挥官的修改/" class="article-date">
  <time datetime="2015-10-16T03:11:47.000Z" itemprop="datePublished">2015-10-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/16/也谈谈炉石传说战歌指挥官的修改/">也谈谈炉石传说战歌指挥官的修改</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我从内测开始就开始玩<a href="http://www.hearthstone.com.cn/" target="_blank" rel="external">炉石传说</a>，也算是老玩家了，3年来经历了各种修改，但好像都没有这一次修改战歌指挥官造成大家这么强烈的反应。</p>
<p>先看看修改前后的对比：<br>修改前：每当你召唤一个攻击力小于或等于3的随从，使该随从获得冲锋<br>修改后：你的具有冲锋的随从获得+1攻击力</p>
<p>这么修改，导致现在比赛和天梯强度都很高的奴隶战卡组彻底消失。可能奴隶战的拥趸确实很多，大部分玩家都对这次修改表示不满，也包括一些职业玩家。</p>
<p>不过我觉得从炉石长远发展考虑，这次修改是没有问题的，我主要从下面3个方面来表达我的想法：</p>
<h1 id="回合外响应"><a href="#回合外响应" class="headerlink" title="回合外响应"></a>回合外响应</h1><p>这里说的和万智牌的『瞬间』差不多（有区别，但在这里不重要），这个名词过于专业，我们还是用更好理解的回合外响应。大家都知道，炉石传说这个游戏，除了奥秘之外（奥秘还不是所有职业都能使用），没有回合外响应机制。也就是说在对方的回合自己不能做任何事情。而又由于普通随从当回合上场是不能攻击的，所以那些能够在当回合就发生作用的卡牌就很强大了。因为没有任何机制可以反制，你只能眼看着卡牌作用生效。这些卡牌包括：</p>
<ul>
<li>法术</li>
<li>具有战吼效果（不考虑负面效果）的随从</li>
<li>回合结束有特殊效果的随从</li>
<li>具有冲锋效果的随从</li>
</ul>
<p>很明显，这类卡牌也是在卡组或者是竞技场中选择最多的，这类卡牌本身十分强大，设计上稍有不慎，就会有一些很不平衡的套路出现。这里我们随手就能列出一堆与冲锋有关的平衡性修改：</p>
<ul>
<li>关门放狗：1费，使你的所有野兽获得+1攻击力并获得冲锋 -&gt; 4费，战场上每有一个敌方随从，便召唤一个1/1并具有冲锋的猎犬。完全改变了能力，使其他随从获得冲锋这个能力过于强大，龙鹰放狗一波流消失</li>
<li>银色指挥官：6费，43身材，冲锋圣盾 -&gt; 6费，42身材，冲锋圣盾。身材削弱，从每套卡组必备到现在只是选择性加入，但竞技场依然基本必拿</li>
<li>战歌指挥官：3费，每当你召唤一个随从，使该随从获得冲锋 -&gt; 3费，每当你召唤一个攻击力小于或等于3的随从，使该随从获得冲锋。已经修改过一次了，可见使其他随从获得冲锋这个能力有多么强大，这么修改后熊猫红巨人一波消失</li>
<li>火车王：4费，62身材，冲锋，战吼：为你的对手召唤2只1/1的雏龙 -&gt; 5费，62身材，冲锋，战吼：为你的对手召唤2只1/1的雏龙。修改前几乎是所有卡组必备，斩杀利器</li>
</ul>
<p>还有一系列战吼削弱：黑铁矮人，破碎残阳祭司，阿古斯防御者等等。所以在没有回合外响应的炉石传说，当回合就能发挥一定效用的卡牌十分强大，必须谨慎设计。这次修改战歌指挥官是必然的，否则以后设计任何3攻及以下的随从都必须考虑和战歌是否有强力的combo，就比如设计师自己提到的，恐惧战马本来是作为中立卡设计，但考虑到和战歌的强力combo（无限解场）最终变成了术士的职业卡。</p>
<p>假设有回合外响应，战歌奴隶主暴乱狂一套打出时，奴隶主攻击我可以用3攻及以上随从防御，高攻暴乱狂攻击时我可以用小随从挡住一次攻击，但现实是攻方主动，奴隶主可以选择攻击低攻随从再生奴隶主，高攻暴乱狂打脸。</p>
<p>所以从内测开始，就有不少声音提到要加入回合外响应。那么为什么炉石传说一直不加入，或者说最初就没有加入呢？看第2点。</p>
<h1 id="游戏体验"><a href="#游戏体验" class="headerlink" title="游戏体验"></a>游戏体验</h1><p>很简单，作为一款线上电子卡牌游戏，加入回合外响应，让游戏体验变得很差。万智牌和游戏王不一样，是实体卡牌，有回合外响应依然不影响游戏的流畅和体验。我们拿实体和线上都有的三国杀来说明：</p>
<ul>
<li>实体：你打出一张顺手牵羊，我有无懈可击的话直接就出来，没有我不说话就可以了，或者把手牌摆开让你顺，进程很流畅。有人打出一张万箭齐发，按顺序，出闪的出闪，无懈的无懈，也很流畅</li>
<li>线上，你打出一张顺手牵羊，我没有无懈，那很流畅，你就直接顺了，我要是有的话，你就得等着我点击是使用还是取消了。有人打出万箭齐发，只要有一个人有无懈，每轮到一个人时系统都会询问是否要无懈，有无懈的那几个人如果不想使用，每一个人都要点击取消。还有于吉出场的时候，游戏体验更是差，大家都懂</li>
</ul>
<p>而且线上三国杀还有这样一个弊端，暴露有人手里有无懈可击，严格来说这个系统设计不完善。为了防止这样，在每一张锦囊牌使用的时候，系统都必须对每个人提示，是否要使用无懈可击，这样体验更差。其实万智牌也有ipad版本，万智牌貌似就是这样做的，每出一张牌，系统都会询问对手有无响应的动作。</p>
<p>炉石传说提高了游戏体验，使游戏进行的相当流畅，但与此同时，损失了回合外响应这一机制，使得游戏设计不能简单的借鉴万智牌和游戏王，必须要有自己的特色：随机因素。</p>
<h1 id="随机因素"><a href="#随机因素" class="headerlink" title="随机因素"></a>随机因素</h1><p>炉石的很多卡牌都具有随机性，最近的几个扩展卡包里有随机效果的卡牌的比例也是大大增加，更是加入了一种新的随机机制：拼点。这些随机因素，就成为了炉石区别于线下实体卡牌的主要方面，成为自己独有的特色。因为很多随机效果，实体卡牌模拟起来相当麻烦，比如：</p>
<ul>
<li>思维窃取，只能从对方牌库随机抽取2张，不能让对方看到，再由裁判取出2张牌的复制给自己。必须要加入裁判，如果自己从牌库取的话可以只取自己想要的牌，还有必须要有庞大的牌库，否则只能用一些万能卡牌作上标记，太low</li>
<li>疯狂投弹者，疯狂爆破者，都需要大量扔骰子</li>
</ul>
<p>先不论加入过多的随机因素是好还是不好，这是个人喜好问题，但是我们也可以看出未来炉石传说设计的思路和方向确实是这样。随机性过多的确会影响竞技性，但是炉石传说自始至终也没有标榜自己是一款竞技游戏，作为线上休闲卡牌对战游戏来说，随机性没有任何问题，反而让对局变得有趣。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bloodwolf.github.io/2015/10/16/也谈谈炉石传说战歌指挥官的修改/" data-id="cioo2w8el0000q2fyl9jiiic0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Docker使用笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/10/Docker使用笔记/" class="article-date">
  <time datetime="2015-10-10T12:17:44.000Z" itemprop="datePublished">2015-10-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/10/Docker使用笔记/">Docker使用笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近尝试了一下特别火的技术：Docker，在此记录一下。按照我的使用思路，需要一个隔离的运行web服务的环境。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>我使用的是ubuntu，apt-get安装并不成功，也懒得处理报出的错误，使用的是另一种安装方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="_">-s</span>SL https://get.docker.com/ubuntu/ | sh</span><br></pre></td></tr></table></figure>
<h1 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h1><p>我使用的是阿里云主机，阿里云默认不能启动Docker，需要执行下面的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route del -net 172.16.0.0 netmask 255.240.0.0</span><br></pre></td></tr></table></figure>
<p>使用docker（也就是网上大部分文章介绍的docker pull）之前需要启动docker：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker daemon</span><br></pre></td></tr></table></figure>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>先了解两个概念：image和container。做个简单的类比，image就是class，container就是object，我们以image为模板，创建container，实际运行的是container。</p>
<p>网上有许多制作好的image，我们先获取一个ubuntu的image：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu</span><br></pre></td></tr></table></figure>
<p>然后启动一个container：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run <span class="_">-d</span> ubuntu</span><br></pre></td></tr></table></figure>
<p>参数-d表示daemon运行，此时可以简单的认为有一个ubuntu系统在运行了,执行下面的命令可以列出正在运行的container：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps <span class="_">-a</span></span><br></pre></td></tr></table></figure>
<p>那么怎么进入这个container，搭建web环境呢？进入container的命令是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -ti [CONTAINER ID] /bin/bash</span><br></pre></td></tr></table></figure>
<p>可以看到这是一个干净的『ubuntu系统』，就当作普通的系统安装环境就可以了，完成后使用exit退出。</p>
<p>使用下列命令可以挂载主机的文件系统到container，以及映射主机的网络端口：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run <span class="_">-d</span> -v /mnt/www:/mnt/www:ro -p 9999:8888 ubuntu</span><br></pre></td></tr></table></figure>
<p>-v /mnt/www:/mnt/www:ro表示挂载主机的/mnt/www目录到container的/mnt/www目录，ro表示只读。-p 9999:8888表示把主机的9999端口映射到container的8888端口。</p>
<p>（未完待续）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bloodwolf.github.io/2015/10/10/Docker使用笔记/" data-id="cioo2w8et0001q2fy7zduzgxz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-五线谱调号的简易识别方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/23/五线谱调号的简易识别方法/" class="article-date">
  <time datetime="2015-09-23T07:03:23.000Z" itemprop="datePublished">2015-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/23/五线谱调号的简易识别方法/">五线谱调号的简易识别方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这篇五线谱调号的识别技巧，只是对初学者来说的，对于很熟悉的人来说，接触了那么多五线谱，死记也都够了，因为一共也就十几种而已（理论上来说是12种，但是会有升C调和降D调有不同的符号这种情况）。</p>
<h1 id="五线谱调号图"><a href="#五线谱调号图" class="headerlink" title="五线谱调号图"></a>五线谱调号图</h1><p><img src="http://www.sinbam.com/data/uimg/2014/allimg/141008/104Q92Z5-0.gif" alt="五线谱调号"></p>
<h1 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h1><p>1个八度有12个音符，就有12种调号，把12个音符排列成下表，表中第2列的数值用来计算音符之间的距离：</p>
<table>
<thead>
<tr>
<th style="text-align:center">C</th>
<th style="text-align:center">#C</th>
<th style="text-align:center">D</th>
<th style="text-align:center">bE</th>
<th style="text-align:center">E</th>
<th style="text-align:center">F</th>
<th style="text-align:center">#F</th>
<th style="text-align:center">G</th>
<th style="text-align:center">bA</th>
<th style="text-align:center">A</th>
<th style="text-align:center">bB</th>
<th style="text-align:center">B</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">4</td>
<td style="text-align:center">5</td>
<td style="text-align:center">6</td>
<td style="text-align:center">7</td>
<td style="text-align:center">8</td>
<td style="text-align:center">9</td>
<td style="text-align:center">10</td>
<td style="text-align:center">11</td>
</tr>
</tbody>
</table>
<p>这个很好理解，也就是全音之间距离是2，半音之间距离是1。对于CDEFGAB这7个音阶来说，只有E和F，B和C之间是半音，其余都是全音。<br>另外，计算的时候是模12的。举个例子，A的值是9，加5的话等于14，模12等于2，也就是A调加5等于D调。</p>
<h1 id="大调和小调"><a href="#大调和小调" class="headerlink" title="大调和小调"></a>大调和小调</h1><p>大调和小调的关系如下：<br>大调 + 9 = 小调<br>比如：<br>F大调，F + 9 = 5 + 9 = 14，14 % 12 = 2，2就是D，所以是d小调。<br>bA大调，bA + 9 = 8 + 9 = 17，17 % 12 = 5，5就是F，所以是f小调。</p>
<p>所以接下来只考虑大调的识别。</p>
<h1 id="五线谱调号的识别"><a href="#五线谱调号的识别" class="headerlink" title="五线谱调号的识别"></a>五线谱调号的识别</h1><p>首先需要知道C大调的情况，没有任何升降号时是C大调，我们记住在C大调中，下加一线和第三间都是C。然后看图，把升号#和降号b表示的调号分为两组，分别讨论。</p>
<h2 id="升号-表示的调号"><a href="#升号-表示的调号" class="headerlink" title="升号#表示的调号"></a>升号#表示的调号</h2><p>看最右边一个升号，在C大调中的音符是多少，加2，就是这个符号表示的大调号。<br>比如：<br>图中的D大调，最右边的#号在第三间，就是C，加2，就是D。<br>图中的#F大调，最右边的#号在第四间，就是E，加2，就是#F。</p>
<h2 id="降号b表示的调号"><a href="#降号b表示的调号" class="headerlink" title="降号b表示的调号"></a>降号b表示的调号</h2><p>看最右边一个降号，在C大调中的音符是多少，加6，就是这个符号表示的大调号。<br>比如：<br>图中的bB大调，最右边的b号在第四间，就是E，加6，就是bB。<br>图中的bC大调，最右边的b号在第一间，就是F，加6，就是B（也就是bC）。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>升号加2，降号加6</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bloodwolf.github.io/2015/09/23/五线谱调号的简易识别方法/" data-id="cioo2w8ey0003q2fyvid2vmss" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-谈谈技术的重要性" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/11/谈谈技术的重要性/" class="article-date">
  <time datetime="2015-09-11T04:52:43.000Z" itemprop="datePublished">2015-09-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/11/谈谈技术的重要性/">谈谈技术的重要性</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>曾经一度觉得技术不重要，重要的是创意，产品，流程等等。经历了几个创业项目才发现，技术比想象的重要的多。</p>
<p>一个创业项目，如果能够拿到投资，说明至少投资方已经看好这个产品或创意。如果技术团队能够把这个产品完整实现，最终即使达不到预期的大成功，至少表现不会太差，投资方也不会因此对团队丧失信心，也就很有机会继续进行下一次新的项目和新的融资。反之，即使产品设计再好（虽然在产品做出来之前谁也不能说是不是真的好，但这里我们假设产品是『真』的好），技术团队却没办法完整实现出来，做出来的东西打了折扣，或者压根就没法做出一个成型的demo，那这个项目就彻底结束，团队也没有继续存在的必要了。</p>
<p>而且，一个技术团队的技术能力，决定了这个产品的最终形态。我仔细想过这个问题，确实是这样：产品经理决定不了产品，技术团队才决定产品。这跟技术团队是否强势没有关系。举个简单的例子，产品经理想做的某一功能，技术团队没法实现，那么根据这个功能在产品中的地位以及在经理心目中的重要程度，产品设计以后的走向都会发生变化。这种产品经理想做而技术团队无法实现的东西很多，慢慢的，就变成了技术团队决定产品了。</p>
<p>借用爱因斯坦的一句话吧（原话不知道，只是大意）：理论决定了我们能够观察到的东西。我们同样可以说：技术决定了我们能够做出什么样的产品。作为技术人员，自勉。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bloodwolf.github.io/2015/09/11/谈谈技术的重要性/" data-id="cioo2w8f00004q2fyleykloee" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-音高与频率的关系" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/28/音高与频率的关系/" class="article-date">
  <time datetime="2015-08-28T07:51:33.000Z" itemprop="datePublished">2015-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/28/音高与频率的关系/">音高与频率的关系</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我们知道，音符的音高是由频率决定的，那么具体是怎样的对应关系，如何量化，本文会解释清楚这些问题。</p>
<h1 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h1><ul>
<li>声音是物体的振动产生的，振幅决定声音的大小，振动的频率决定音高。至于音色则比较复杂，比如钢琴和吉他弹奏同一个音符，频率一样，但是我们还是能够听出差别，这是因为这里的频率一样只是基音频率一样，还有各种泛音，钢琴和吉他的泛音频率不一样，导致音色不一样。所以本质上还是频率决定了音色。</li>
<li>人耳能够听到的声音的频率范围是20 - 20KHz。</li>
<li>人耳对音高的感受，或者说对频率的感受不是线性的，是对数关系。比如听到三个音符：do，高八度的do，再高八度的do，这三个音符的频率不是线性的等差数列，而是等比数列。所以每高一个八度，频率翻倍。</li>
<li>规定A4音高的频率是440Hz。我们常说的中央C是C4，A4就是中央C的do对应的la。</li>
</ul>
<h1 id="音符如何确定"><a href="#音符如何确定" class="headerlink" title="音符如何确定"></a>音符如何确定</h1><p>由预备知识的最后2点，可以得出下列音符的频率值：<br>A0 - 27.5<br>A1 - 55<br>A2 - 110<br>A3 - 220<br>A4 - 440<br>A5 - 880<br>A6 - 1760</p>
<p>那么每个八度中有几个音符，每个音符的频率如何确定？有2个原则：</p>
<ol>
<li>音符之间的声音应该是和谐的。这里又要用到毕达哥拉斯的故事了，弦乐器中，弦长之间的比是整数时，比如2：1，3：2，4：3等等，发出的声音比较和谐，这里的弦长和频率是反比关系。</li>
<li>相邻音符之间的频率的比值应该尽可能相等。</li>
</ol>
<p>根据这2个原则，已经可以从数学上推出结果了。</p>
<h1 id="十二平均律"><a href="#十二平均律" class="headerlink" title="十二平均律"></a>十二平均律</h1><p>比较常用的有2种方法：一种是每个八度7个音符，用的是『五度相生律』，一种是现在更流行的每八度12个音符，即『十二平均律』。</p>
<p>十二平均律简单易理解，就是每个八度12个音符，每两个音符之间的频率比值是固定的：2的12次方根。这样我们计算一个八度的音符的频率，得到：<br>C - 261.6255653005985<br>#C - 277.18263097687196<br>D - 293.66476791740746<br>#D - 311.1269837220808<br>E - 329.62755691286986<br>F - 349.2282314330038<br>#F - 369.99442271163434<br>G - 391.99543598174927<br>#G - 415.3046975799451<br>A - 440.0<br>#A - 466.1637615180899<br>B - 493.8833012561241</p>
<p>看几个音和C音的频率的比值：<br>F : C = 1.3348398541700348 约等于 4 : 3<br>G : C = 1.4983070768766822 约等于 3 : 2</p>
<p>这样十二平均律既保证了每相邻两个音符之间频率的比值一致，频率的比值也接近整数比听起来比较和谐，所以得到广泛应用。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bloodwolf.github.io/2015/08/28/音高与频率的关系/" data-id="cioo2w8f30005q2fyr8jro3kz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python处理midi文件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/19/python处理midi文件/" class="article-date">
  <time datetime="2015-08-18T16:52:39.000Z" itemprop="datePublished">2015-08-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/19/python处理midi文件/">python处理midi文件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近需要生成midi文件，找到了<a href="https://pypi.python.org/pypi/mido/" target="_blank" rel="external">mido</a>，能够比较简单的实现需求。</p>
<h1 id="安装mido"><a href="#安装mido" class="headerlink" title="安装mido"></a>安装mido</h1><p>两种方式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo easy_install mido</span><br></pre></td></tr></table></figure></p>
<p>或者下载源码包<a href="https://pypi.python.org/packages/source/m/mido/mido-1.1.14.tar.gz#md5=d144ac5f31a39b867bcba8bef4658660" target="_blank" rel="external">mido-1.1.14.tar.gz</a>自己安装。</p>
<h1 id="使用mido生成midi"><a href="#使用mido生成midi" class="headerlink" title="使用mido生成midi"></a>使用mido生成midi</h1><p>详细文档：<a href="http://mido.readthedocs.org/en/latest/" target="_blank" rel="external">http://mido.readthedocs.org/en/latest/</a>。不过这文档看起来很专业，实际上小错很多，例如<a href="http://mido.readthedocs.org/en/latest/midi_files.html#creating-a-new-file" target="_blank" rel="external">Creating a New File</a>这一节，有下面的示例代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mido.midifies <span class="keyword">import</span> MidiTrack</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> MidiFile() <span class="keyword">as</span> mid:</span><br><span class="line">    track = MidiTrack()</span><br><span class="line">    tracks.append(track)</span><br><span class="line"></span><br><span class="line">    tracks.append(midi.Message(<span class="string">'program_change'</span>, program=<span class="number">12</span>, time=<span class="number">0</span>))</span><br><span class="line">    tracks.append(midi.Message(<span class="string">'note_on'</span>, note=<span class="number">64</span>, velocity=<span class="number">64</span>, time=<span class="number">32</span>)</span><br><span class="line">    tracks.append(midi.Message(<span class="string">'note_off'</span>, note=<span class="number">64</span>, velocity=<span class="number">127</span>, time=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line">    mid.save(<span class="string">'new_song.mid'</span>)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>import那一句有拼写错误，midifies应为midifiles</li>
<li>MidiFile，MidiTrack没有import，应该是在前面的小节引入了，但作为小例子还是保持完整性比较好</li>
<li>tracks.append(track)，应该是mid.tracks</li>
<li>后面3行的tracks.append，应该是track.append</li>
<li>3行的tracks.append中，后2行最后少一个右括号</li>
</ul>
<p>最后花费了近半个小时，修改成这样才算成功生成了new_song.mid<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mido.midifiles <span class="keyword">import</span> MidiTrack</span><br><span class="line"><span class="keyword">from</span> mido <span class="keyword">import</span> MidiFile</span><br><span class="line"><span class="keyword">from</span> mido <span class="keyword">import</span> Message</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> MidiFile() <span class="keyword">as</span> mid:</span><br><span class="line">    track = MidiTrack()</span><br><span class="line">    mid.tracks.append(track)</span><br><span class="line">    track.append(Message(<span class="string">'program_change'</span>, program=<span class="number">12</span>, time=<span class="number">0</span>))</span><br><span class="line">    track.append(Message(<span class="string">'note_on'</span>, note=<span class="number">64</span>, velocity=<span class="number">64</span>, time=<span class="number">32</span>))</span><br><span class="line">    track.append(Message(<span class="string">'note_off'</span>, note=<span class="number">64</span>, velocity=<span class="number">127</span>, time=<span class="number">32</span>))</span><br><span class="line"></span><br><span class="line">    mid.save(<span class="string">'new_song.mid'</span>)</span><br></pre></td></tr></table></figure></p>
<h1 id="缺少的功能"><a href="#缺少的功能" class="headerlink" title="缺少的功能"></a>缺少的功能</h1><p>mido貌似还不能修改ticks per beat，默认值是480，只能修改tempo，默认是5000000：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">track.append(MetaMessage(<span class="string">'set_tempo'</span>, tempo=<span class="number">4000000</span>))</span><br></pre></td></tr></table></figure></p>
<p>因为我是从其他工具得到的midi event和ticks，ticks per beat不是480，按照比例修改tempo有舍人误差，所以现在的做法是生成midi文件后再直接修改midi文件头部分，来修改ticks per beat。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bloodwolf.github.io/2015/08/19/python处理midi文件/" data-id="cioo2w8ev0002q2fy1hpou9e3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/10/16/也谈谈炉石传说战歌指挥官的修改/">也谈谈炉石传说战歌指挥官的修改</a>
          </li>
        
          <li>
            <a href="/2015/10/10/Docker使用笔记/">Docker使用笔记</a>
          </li>
        
          <li>
            <a href="/2015/09/23/五线谱调号的简易识别方法/">五线谱调号的简易识别方法</a>
          </li>
        
          <li>
            <a href="/2015/09/11/谈谈技术的重要性/">谈谈技术的重要性</a>
          </li>
        
          <li>
            <a href="/2015/08/28/音高与频率的关系/">音高与频率的关系</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 bloodwolf<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>